(()=>{"use strict";var t,e={1837:(t,e,n)=>{const o=window.wp.apiFetch;var r=n.n(o);const i=window.wp.i18n;({init(){const{commentId:t,confirmationMessage:e,promptMessage:n,promptToFollowAgain:o,nonce:r}=window.ccData;if(t&&e){if(this.commentId=t,this.confirmationMessage=e,this.promptMessage=n,this.actionNonce=r,o)return this.promptToFollowCommentAgain();this.displaySuccessAlert(e)}},promptToFollowCommentAgain(){const t=document.createElement("div");t.classList.add("ccvtr-alert","ccvtr-alert-prompt"),t.innerHTML=`\n\t\t\t\t<div>\n\t\t\t\t\t${this.promptMessage}\n\t\t\t\t</div>\n\t\t\t\t<div class="ccvtr-buttons">\n\t\t\t\t\t<button id="yesBtn" class="ccvtr-primary-btn">\n\t\t\t\t\t\t${(0,i.__)("Yes","comment-notifications")}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button id="noBtn" class="ccvtr-secondary-btn">\n\t\t\t\t\t\t${(0,i.__)("No","comment-notifications")}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`;const e=t.querySelector("#yesBtn"),n=t.querySelector("#noBtn");e.addEventListener("click",this.handleCreateFollow.bind(this)),n.addEventListener("click",this.handleClose.bind(this)),this.writeToPage(t)},displaySuccessAlert(t){this.displayAlert(t,"success")},displayErrorAlert(t){this.displayAlert(t,"error")},displayAlert(t,e){const n=document.createElement("div");n.classList.add("ccvtr-alert",`ccvtr-alert-${e}`),n.innerHTML=t,this.writeToPage(n)},async handleCreateFollow(){try{await function(t){const{path:e,method:n,body:o,useBody:i=!1,...s}=t,c={};return i?c.body=o:c.data=o,r()({path:`ccvtr/${e}`,method:n||"GET",...s,...c})}({path:"v1/comment-follows",method:"POST",body:{comment_id:this.commentId,nonce:this.actionNonce}}).then((t=>{if(t.error)throw new Error(t.error);return t})),this.displaySuccessAlert(this.confirmationMessage)}catch(t){this.displayErrorAlert(t.message)}},handleClose(){this.outputEl.remove()},writeToPage(t){if(this.commentContentEl||(this.commentContentEl=document.querySelector(`#comment-${this.commentId} .comment-content, #comment-${this.commentId} .wp-block-comment-content`)),this.commentContentEl)return this.outputEl?void this.outputEl.replaceChild(t,this.outputEl.firstChild):(this.outputEl=document.createElement("div"),this.outputEl.classList.add("ccvtr-output"),this.outputEl.appendChild(t),void this.commentContentEl.appendChild(this.outputEl))}}).init()}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.m=e,t=[],o.O=(e,n,r,i)=>{if(!n){var s=1/0;for(d=0;d<t.length;d++){for(var[n,r,i]=t[d],c=!0,a=0;a<n.length;a++)(!1&i||s>=i)&&Object.keys(o.O).every((t=>o.O[t](n[a])))?n.splice(a--,1):(c=!1,i<s&&(s=i));if(c){t.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,r,i]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={863:0,949:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var r,i,[s,c,a]=n,l=0;if(s.some((e=>0!==t[e]))){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(a)var d=a(o)}for(e&&e(n);l<s.length;l++)i=s[l],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(d)},n=globalThis.webpackChunkcomment_converter_plugin=globalThis.webpackChunkcomment_converter_plugin||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var r=o.O(void 0,[949],(()=>o(1837)));r=o.O(r)})();